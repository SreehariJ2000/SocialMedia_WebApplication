@model List<SocialMediaWeb.Models.PostDisplayViewModel>
@{
    ViewBag.Title = "UserDashboard";
    Layout = "~/Views/Shared/UserLayout.cshtml";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link href="~/Content/CustomCSS/UserCSS/UserDashboard.css?v=@DateTime.Now.Ticks" rel="stylesheet" />



@if (TempData["Message"] != null)
{
    <div class="alert alert-info">
        @TempData["Message"]
    </div>
}


<div class="dashboard-section">
    <div class="dashboard-section-left">

    </div>

    <div class="dashboard-section-middle">
        @foreach (var post in Model)
        {
            <div class="post-container">
                <div class="post-title">
                    <div class="profile-picture">
                        @if (!string.IsNullOrEmpty(post.ProfilePicture))
                        {
                            <img src="data:image/jpeg;base64,@post.ProfilePicture" alt="Profile Picture" class="picture" />

                        }
                    </div>
                    <div class="name">
                        @post.FirstName @post.LastName
                    </div>
                </div>
                <div class="post-content">
                    @post.Content
                </div>
                <div class="post-image">
                    @if (!string.IsNullOrEmpty(post.ImageUrl))
                    {
                        <img src="data:image;base64,@post.ImageUrl" alt="Post Image" class="post-picture" />
                    }
                </div>

                <div class="post-actions">

                    <div class="action-item">

                        <span>@post.LikeCount</span> Likes
                        <i class="fas fa-thumbs-up like-button"></i>
                    </div>

                    <div class="action-item">

                        <a href="@Url.Action("DisplayComment", "User", new { postId = post.PostId })">
                            <i class="fas fa-comment comment-button"></i>
                        </a>
                    </div>

                    <div class="action-item">

                        <i class="fas fa-flag report-button"> @Html.ActionLink("Report", "ReportPost", "User", new { id = post.PostId }, new { @class = "report" }) </i>
                    </div>
                </div>

                <div style="margin-top:40px;">
                    @using (Html.BeginForm("AddComment", "User", FormMethod.Post))
                    {
                        @Html.Hidden("postId", post.PostId)
                        <input type="text" name="commentText" placeholder="Add comment" class="comment-input" />
                        <button type="submit" class="btn btn-primary">Comment</button>
                    }
                </div>



            </div>
        }
    </div>

    <div class="dashboard-section-right">

    </div>
</div>


